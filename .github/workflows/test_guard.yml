name: Deployment Workflow

on:
  workflow_dispatch:

jobs:
  # -------------------------
  # Guard job: checks org-level deployment flag
  # -------------------------
  guard:
    uses: MM-DevTests/SharedRepo/.github/workflows/deployment_guard.yml@main

  # -------------------------
  # Deployment Job A
  # -------------------------
  deploy_a:
    needs: guard
    runs-on: ubuntu-latest
    if: ${{ needs.guard.outputs.allow == 'true' }}
    steps:
      - name: Deploy Application A
        run: |
          echo "ðŸš€ Deployment A running..."
          # Insert deployment A steps here

  # -------------------------
  # Deployment Job B
  # -------------------------
  deploy_b:
    needs: guard
    runs-on: ubuntu-latest
    if: ${{ needs.guard.outputs.allow == 'true' }}
    steps:
      - name: Deploy Application B
        run: |
          echo "ðŸš€ Deployment B running..."
          # Insert deployment B steps here

  # -------------------------
  # Optional blocked notification
  # -------------------------
  blocked:
    needs: guard
    runs-on: ubuntu-latest
    steps:
      - name: Deployment Blocked
        run: |
          echo "ðŸš« Deployment blocked by system administrator."
